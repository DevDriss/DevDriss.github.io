<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>DevDriss</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" href="../assets/favicon.png">
        <!-- <link rel="stylesheet" href="../style.css"> -->
        <link rel="stylesheet" href="traductor.css">

</head>
<body>
    <header>
        <nav>
            <div class="logo">Driss Landou</div>
            <ul class="nav-links">
                <li><a href="/">Menu</a></li>
            </ul>
        </nav>
        <img src="../assets/darkmode_icon.png" id="dark-mode" onclick="darkMode()" style="height: 35px;">
    </header>

    <h1 style="margin-left: 20px;">Translator<br>(difficulty for me: <span style="color: orange;">medium</span>)</h1>

    <div style="display: flex; margin-left: 30px; max-width: 1000px;">
        <select id="sourceLang" class="button">
            <option value="fr">French</option>
            <option value="en">English</option>
            <option value="de">German</option> 
            <option value="es">Spanish</option>
            <option value="it">Italian</option>
            <option value="ja">Japanase</option>
            <option value="nl">Dutch</option>
            <option value="ru">Russian</option>
            <option value="zh">Chinese</option>
            <option value="ar">Arabic</option>
            <option value="auto">Detect Language</option>
        </select>

        <button onclick="eraseText()" class="button">Erase</button>
        <button onclick="switchLang()" class="button">Switch Languages</button>
    </div>
    <textarea id="sourceText" class="traductionText" onkeydown="requestTimer()" placeholder="Entrer texte Ã  traduire"></textarea>

        
        <div style="display: flex; margin-left: 30px;">
    <select id="targetLang" class="button" onchange="translating()">
        <option value="en">English</option>
        <option value="fr">French</option>
        <option value="de">German</option> 
        <option value="es">Spanish</option>
        <option value="it">Italian</option>
        <option value="ja">Japanese</option>
        <option value="nl">Dutch</option>
        <option value="ru">Russian</option>
        <option value="zh">Chinese</option>
        <option value="ar">Arabic</option>
    </select>
            <button onclick="copyText()" class="button">Copy Translation to Clipboard</button>
            <button id="speakerBtn" title="Text to Speech"><img src="../assets/speaker_photoshop3.png" alt="Click for Text to Speech" onclick="textSpeech()" class="speaker"></button>
        </div>
        <textarea id="translatedText" class="traductionText" readonly placeholder="Texte traduit"></textarea>
        
        <div id="file-container">
            <h4 id="text-upload">Or click here to select a file to translate:</h4>
            <div id="fileBtn">
                <input type="file" id="file-input" accept=".txt" onchange="fileTranslation(event)">
                <label for="file" class="custom-file-label">Select a Text File</label>
            </div>
        </div>
        
        <div class="code_request">
            <H2>  Real-Time API Request:</H2>
    <code>
        <span class="dark_blue">const</span> <span class="blue">url</span> = <span class="brown">`https://api.mymemory.translated.net/get?q=</span>
            <span class="yellow">${</span><span class="light_yellow">encodeURIComponent</span><span class="blue">(</span><span class="blue changing" id="code_input">...</span><span class="blue">)</span><span class="yellow">}</span><span class="brown">&langpair=</span><span class="yellow">${</span><span class="blue changing" id="code_langpair">...</span><span class="yellow">}</span><span class="brown">`</span>;
            <span class="green">// The underlined code here and the</span>
                <span class="green">// reponse bellow change when you translate something.</span>
        <span class="dark_blue">const</span> <span class="blue">response</span> = <span class="pink">await</span> <span class="light_yellow">fetch</span><span class="blue">(</span><span class="blue">url</span><span class="blue">)</span>; <span class="commentGreen"></span>
        <span class="dark_blue">const</span> <span class="blue">data</span> = <span class="pink">await</span> <span class="blue">response</span>.<span class="light_yellow">json</span><span class="blue">()</span>;
        <span class="blue">document</span>.<span class="light_yellow">getElementById</span><span class="blue">(</span><span class="brown">"translatedText"</span><span class="blue">)</span>.<span class="blue">innerHTML</span> = <span class="blue">jsonResponse</span>.<span class="blue">responseData</span>.<span class="blue">translatedText</span>; <span class="commentGreen"></span>        
    </code>
</div>

<div class="responseAndComment code_response">
    <H2>Response:</H2>
<div id="code_response">Traduct something to get a response from MyMemory.</div>
</div>

<div class="responseAndComment comment">
<H2>Driss's Comments:</H2>
<p>    &lt;!-- How this app works:

    An API requests is trigerred when any key is pressed in the 
    text input above. But to make it not send a request for every singe key
    stroke that is being typed (which would be very inefficient when typing entire phrases)
    there is a JavaScript setTimout that waits 0.7 seconds, before sending the request. 
    If during this 0.7s another key is pressed, the timeout is reset to 0.7s.
    This makes it so that when typing a word or phrase, only one (or only a few) request is
    being sent when the user stops typing.--&gt;</p>

    <p>    &lt;!-- I made the request code look like just how it would look in VS Code
    by giving a class to every singe word, and coloring that class with CSS. I used the 
    CSS property white-space: pre; to keep the indents and the 
    line breaks from the html code to the borwser. --&gt;
    </p>

</div>


    <script src="traductor.js"></script>
    <script src="traductor2.js"></script>
    <script src="../darkMode.js"></script> 
</body>
</html>





